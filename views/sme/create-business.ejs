<%- include('../partials/header', { extraCss: 'auth.css' }) %>

<div class="container" style="padding: 40px 0;">
    <div class="auth-card" style="max-width: 600px; margin: 0 auto; border-top: 4px solid var(--primary);">
        <div class="auth-header">
            <h2>Create New Business</h2>
            <p>Set up your store profile to start selling</p>
        </div>

        <!-- Validation Errors -->
        <% if (typeof errors !== 'undefined') { %>
            <% errors.forEach(function(error) { %>
                <div style="color: var(--danger); background: #ffebee; padding: 10px; border-radius: var(--radius-sm); margin-bottom: 15px; font-size: 13px; text-align: center;">
                    <%= error.msg %>
                </div>
            <% }); %>
        <% } %>

        <!-- Business Type Guidance -->
        <div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: var(--radius-sm); padding: 15px; margin-bottom: 25px;">
            <h4 style="margin-top: 0; margin-bottom: 10px; font-size: 14px; color: var(--secondary);"><i class="fas fa-info-circle" style="color: var(--primary);"></i> Which Business Type are you?</h4>
            <div style="display: grid; gap: 10px; font-size: 12px; color: var(--text-muted);">
                <div style="display: flex; align-items: flex-start; gap: 10px;">
                    <span style="background: var(--primary); color: white; padding: 2px 6px; border-radius: 4px; font-size: 10px; min-width: 60px; text-align: center;">RETAIL</span>
                    <span>You sell physical goods (e.g., phones, clothes, food). You can manage inventory and shipping.</span>
                </div>
                <div style="display: flex; align-items: flex-start; gap: 10px;">
                    <span style="background: #9c27b0; color: white; padding: 2px 6px; border-radius: 4px; font-size: 10px; min-width: 60px; text-align: center;">SERVICE</span>
                    <span>You offer skills or labor (e.g., repairs, salon, cleaning). You can manage operators and queues.</span>
                </div>
                <div style="display: flex; align-items: flex-start; gap: 10px;">
                    <span style="background: #64748b; color: white; padding: 2px 6px; border-radius: 4px; font-size: 10px; min-width: 60px; text-align: center;">HYBRID</span>
                    <span>You do both (e.g., a salon that also sells hair products). Verification required.</span>
                </div>
            </div>
        </div>

        <form action="/sme/create-business" method="POST" enctype="multipart/form-data" class="auth-form">
            
            <div class="form-group">
                <label for="name">Business Name</label>
                <input type="text" id="name" name="name" placeholder="e.g., Aisha's Fashion Hub" value="<%= typeof name != 'undefined' ? name : '' %>" required>
            </div>

            <div class="form-group">
                <label for="business_type">Business Type</label>
                <select id="business_type" name="business_type" style="width: 100%; padding: 12px 15px; border: 1px solid #d1d5db; border-radius: var(--radius-sm); background: var(--bg-input); font-family: var(--font-main); font-size: 14px;" required>
                    <option value="" disabled <%= typeof business_type == 'undefined' ? 'selected' : '' %>>Select type...</option>
                    <option value="retail" <%= typeof business_type != 'undefined' && business_type == 'retail' ? 'selected' : '' %>>Retail (Sells Products)</option>
                    <option value="service" <%= typeof business_type != 'undefined' && business_type == 'service' ? 'selected' : '' %>>Service (Offers Services)</option>
                    <option value="hybrid" <%= typeof business_type != 'undefined' && business_type == 'hybrid' ? 'selected' : '' %>>Hybrid (Both)</option>
                </select>
            </div>

            <div class="form-group">
                <label for="category">Legacy Category (Internal)</label>
                <select id="category" name="category" style="width: 100%; padding: 12px 15px; border: 1px solid #d1d5db; border-radius: var(--radius-sm); background: var(--bg-input); font-family: var(--font-main); font-size: 14px;">
                    <option value="" disabled <%= typeof category == 'undefined' ? 'selected' : '' %>>Select a category...</option>
                    <option value="retail" <%= typeof category != 'undefined' && category == 'retail' ? 'selected' : '' %>>Retail (Products)</option>
                    <option value="service" <%= typeof category != 'undefined' && category == 'service' ? 'selected' : '' %>>Service (Salons, Repairs, etc.)</option>
                    <option value="food" <%= typeof category != 'undefined' && category == 'food' ? 'selected' : '' %>>Food & Caf√©</option>
                </select>
            </div>

            <div class="form-group">
                <label for="address">Business Address</label>
                <input type="text" id="address" name="address" placeholder="Shop 24, Zoo Road, Kano" value="<%= typeof address != 'undefined' ? address : '' %>" required>
            </div>

            <div class="form-group">
                <label for="description">Description (Optional)</label>
                <textarea id="description" name="description" rows="4" placeholder="Tell customers about your business..." style="width: 100%; padding: 12px 15px; border: 1px solid #d1d5db; border-radius: var(--radius-sm); background: var(--bg-input); font-family: var(--font-main); font-size: 14px;"><%= typeof description != 'undefined' ? description : '' %></textarea>
            </div>

            <div class="form-group">
                <label for="logo">Business Logo</label>
                <input type="file" id="logo" name="logo" accept="image/*" style="padding: 10px 0;">
                <small style="color: var(--text-muted); display: block;">Recommended: Square image, max 2MB</small>
            </div>

            <button type="submit" class="btn-auth">Create Business Profile</button>
        </form>

        <div class="auth-footer">
            <a href="/sme/dashboard"><i class="fas fa-arrow-left"></i> Back to Dashboard</a>
        </div>
    </div>
</div>

<%- include('../partials/footer') %>
