<%- include('../partials/header') %>

<div class="container" style="padding: 30px 20px; min-height: 60vh;">
    <div class="section-header">
        <h3 class="section-title">Admin Dashboard</h3>
        <div class="user-actions">
            <span style="font-weight: 600; color: var(--text-muted);">Admin Access</span>
            <a href="/logout" class="slide-btn" style="background: #fee2e2; color: #dc2626; border: none;">Logout</a>
        </div>
    </div>

    <!-- Stats Grid -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 40px;">
        <div style="background: white; padding: 20px; border-radius: var(--radius-md); box-shadow: var(--shadow-sm); text-align: center;">
            <h2 style="margin: 0; color: var(--primary);"><%= stats.users %></h2>
            <p style="color: var(--text-muted); margin: 0;">Total Users</p>
            <a href="/admin/users" style="font-size: 12px; text-decoration: none;">Manage</a>
        </div>
        <div style="background: white; padding: 20px; border-radius: var(--radius-md); box-shadow: var(--shadow-sm); text-align: center;">
            <h2 style="margin: 0; color: var(--primary);"><%= stats.businesses %></h2>
            <p style="color: var(--text-muted); margin: 0;">SMEs Registered</p>
            <div style="display: flex; gap: 10px; justify-content: center;">
                <a href="/admin/smes" style="font-size: 12px; text-decoration: none;">Manage</a>
                <span style="color: #eee;">|</span>
                <a href="/admin/smes/requests" style="font-size: 12px; text-decoration: none; color: var(--warning); font-weight: bold;">Requests</a>
            </div>
        </div>
        <div style="background: white; padding: 20px; border-radius: var(--radius-md); box-shadow: var(--shadow-sm); text-align: center;">
            <h2 style="margin: 0; color: var(--primary);"><%= stats.listings %></h2>
            <p style="color: var(--text-muted); margin: 0;">Total Listings</p>
            <a href="/admin/listings" style="font-size: 12px; text-decoration: none;">Manage</a>
        </div>
        <div style="background: white; padding: 20px; border-radius: var(--radius-md); box-shadow: var(--shadow-sm); text-align: center;">
            <h2 style="margin: 0; color: var(--primary);"><%= stats.categories %></h2>
            <p style="color: var(--text-muted); margin: 0;">Categories</p>
            <a href="/admin/categories" style="font-size: 12px; text-decoration: none;">Manage</a>
        </div>
    </div>

    <div class="row" style="display: flex; gap: 30px;">
        <div class="col" style="flex: 1;">
            <div style="background: white; border-radius: var(--radius-md); box-shadow: var(--shadow-sm); overflow: hidden;">
                <div style="padding: 15px 20px; border-bottom: 1px solid #eee; font-weight: bold; color: var(--secondary);">
                    Recent Business Registrations
                </div>
                <% if (recentBusinesses.length === 0) { %>
                    <div style="padding: 20px; text-align: center; color: var(--text-muted);">No businesses yet.</div>
                <% } else { %>
                    <table style="width: 100%; border-collapse: collapse;">
                        <tbody>
                            <% recentBusinesses.forEach(biz => { %>
                                <tr style="border-bottom: 1px solid #eee;">
                                    <td style="padding: 15px 20px;">
                                        <strong style="display: block; color: var(--secondary);"><%= biz.name %></strong>
                                        <span style="font-size: 12px; color: var(--text-muted);"><%= biz.owner ? biz.owner.name : 'Unknown Owner' %></span>
                                    </td>
                                    <td style="padding: 15px 20px; text-align: right;">
                                        <span style="font-size: 11px; padding: 2px 6px; background: #e0f2fe; color: #0369a1; border-radius: 4px;"><%= biz.status.toUpperCase() %></span>
                                    </td>
                                </tr>
                            <% }) %>
                        </tbody>
                    </table>
                <% } %>
            </div>
        </div>
        
        <!-- Quick Links -->
        <div class="col" style="width: 300px;">
            <div style="background: white; padding: 20px; border-radius: var(--radius-md); box-shadow: var(--shadow-sm);">
                <h4 style="margin-top: 0; color: var(--secondary);">Admin Actions</h4>
                <ul style="list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 10px;">
                    <li><a href="/admin/categories" class="slide-btn" style="text-align: center; width: 100%; display: block;">+ Add Category</a></li>
                    <li><a href="/admin/users" class="slide-btn" style="text-align: center; width: 100%; display: block; background: transparent; color: var(--secondary); border: 1px solid #eee;">View All Users</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>

<%- include('../partials/footer') %>
